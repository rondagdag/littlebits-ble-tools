<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<script src="js/littlebits-w30-ble.js"></script>
		<script src="https://unpkg.com/react@latest/dist/react.js"></script>
	    <script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
	    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
	</head>
	<body>
		<div id="root"></div>
	    <script type="text/babel" src="js/examples/BLEAdaptor.jsx"></script>
	    <script type="text/babel" src="js/examples/PairingView.jsx"></script>
	    <script type="text/babel" src="js/examples/SliderControlView.jsx"></script>
	    <script type="text/babel" src="js/examples/CarControlView.jsx"></script>
	    <script type="text/babel" src="js/examples/MainView.jsx"></script>

<script>
/*
document.getElementById("button1").addEventListener('click', evt => {
	event.stopPropagation();
	event.preventDefault();

	document.getElementById("output1").value = "";
	W30Bit.connectBit("X_Axis", 128);
});
document.getElementById('slider1').addEventListener('input', evt => {
	const val = evt.target.value;
	W30Bit.writeValue("X_Axis", val);
});
document.getElementById("button2").addEventListener('click', evt => {
	event.stopPropagation();
	event.preventDefault();

	document.getElementById("output2").value = "";
	W30Bit.connectBit("Y_Axis", 128);
});
document.getElementById('slider2').addEventListener('input', evt => {
	const val = evt.target.value;
	W30Bit.writeValue("Y_Axis", val);
});
window.addEventListener("deviceorientation", (evt) => {
	const xVal = Math.round((evt.gamma + 90) * (255.0/180.0));
	document.getElementById('slider1').value = xVal;

	const yVal = Math.round((evt.beta + 180) * (255.0/360.0));
	document.getElementById('slider2').value = yVal;

	W30Bit.writeValue("X_Axis", xVal);
	W30Bit.writeValue("Y_Axis", yVal);
});

W30Bit.addConnectionUpdateHandler((label, state) => {
	const logs = state.log.map(line => (label + ": " + line)).join("\n");
    const buttonLabel = (state.state === "Disconnected") ? "Pair... (Disconnected)" : ("Pair... " + state.name + " (" + state.state + ")");
    if (label === "X_Axis") {
        document.getElementById("button1").innerText = buttonLabel;
    	document.getElementById("output1").value = logs;
    } else if (label === "Y_Axis") {
        document.getElementById("button2").innerText = buttonLabel;
    	document.getElementById("output2").value = logs;
    }
});
*/
</script>
	</body>
</html>
